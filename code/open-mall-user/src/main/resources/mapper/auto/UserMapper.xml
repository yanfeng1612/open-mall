<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.openmall.user.dao.auto.UserMapper">

    <resultMap id="baseResultMap" type="com.openmall.user.domain.auto.User">
    
        <result property="id" column="id" />
        <result property="username" column="username" />
        <result property="password" column="password" />
        <result property="phone" column="phone" />
        <result property="address" column="address" />
        <result property="sex" column="sex" />
        <result property="age" column="age" />
        <result property="birth" column="birth" />
        <result property="email" column="email" />
        <result property="yn" column="yn" />
        <result property="createdTime" column="created_time" />
        <result property="modifiedTime" column="modified_time" />
        
    </resultMap>

    <sql id="queryColumns">
        <trim prefixOverrides=",">
        
            ,id	/* 自动编号 */
        
            ,username	/* 用户名 */
        
            ,password	/* 密码 */
        
            ,phone	/* 手机号 */
        
            ,address	/* 地址 */
        
            ,sex	/* 用户性别  0-未知   1-男  2-女 */
        
            ,age	/* 用户年龄 */
        
            ,birth	/* 生日 */
        
            ,email	/* 邮箱 */
        
            ,yn	/* 数据状态 0-无效 1-有效 */
        
            ,created_time	/* 创建时间 */
        
            ,modified_time	/* 修改时间 */
        
        </trim>
    </sql>

    <sql id="wherecontation">
        <if test="query!= null">
        
            <if test="query.id != null">
                and id = #{query.id} /* 自动编号 */
            </if>
        
            <if test="query.username != null and query.username != ''">
                and username = #{query.username} /* 用户名 */
            </if>
        
            <if test="query.password != null and query.password != ''">
                and password = #{query.password} /* 密码 */
            </if>
        
            <if test="query.phone != null and query.phone != ''">
                and phone = #{query.phone} /* 手机号 */
            </if>
        
            <if test="query.address != null and query.address != ''">
                and address = #{query.address} /* 地址 */
            </if>
        
            <if test="query.sex != null">
                and sex = #{query.sex} /* 用户性别  0-未知   1-男  2-女 */
            </if>
        
            <if test="query.age != null">
                and age = #{query.age} /* 用户年龄 */
            </if>
        
            <if test="query.birth != null">
                and birth = #{query.birth} /* 生日 */
            </if>
        
            <if test="query.email != null and query.email != ''">
                and email = #{query.email} /* 邮箱 */
            </if>
        
            <if test="query.yn != null">
                and yn = #{query.yn} /* 数据状态 0-无效 1-有效 */
            </if>
        
            <if test="query.createdTime != null">
                and created_time = #{query.createdTime} /* 创建时间 */
            </if>
        
            <if test="query.modifiedTime != null">
                and modified_time = #{query.modifiedTime} /* 修改时间 */
            </if>
        
        </if>
    </sql>

    <sql id="getInsertField">
        <trim prefixOverrides=",">
        
        <if test="id != null">
            ,id /* 自动编号 */
        </if>
        
        <if test="username != null">
            ,username /* 用户名 */
        </if>
        
        <if test="password != null">
            ,password /* 密码 */
        </if>
        
        <if test="phone != null">
            ,phone /* 手机号 */
        </if>
        
        <if test="address != null">
            ,address /* 地址 */
        </if>
        
        <if test="sex != null">
            ,sex /* 用户性别  0-未知   1-男  2-女 */
        </if>
        
        <if test="age != null">
            ,age /* 用户年龄 */
        </if>
        
        <if test="birth != null">
            ,birth /* 生日 */
        </if>
        
        <if test="email != null">
            ,email /* 邮箱 */
        </if>
        
        <if test="yn != null">
            ,yn /* 数据状态 0-无效 1-有效 */
        </if>
        
        <if test="createdTime != null">
            ,created_time /* 创建时间 */
        </if>
        
        <if test="modifiedTime != null">
            ,modified_time /* 修改时间 */
        </if>
        
        </trim>
    </sql>

    <sql id="getInsertFieldValue">
        <trim prefixOverrides=",">
        
        <if test="id != null">
            ,#id /* 自动编号 */
        </if>
        
        <if test="username != null">
            ,#username /* 用户名 */
        </if>
        
        <if test="password != null">
            ,#password /* 密码 */
        </if>
        
        <if test="phone != null">
            ,#phone /* 手机号 */
        </if>
        
        <if test="address != null">
            ,#address /* 地址 */
        </if>
        
        <if test="sex != null">
            ,#sex /* 用户性别  0-未知   1-男  2-女 */
        </if>
        
        <if test="age != null">
            ,#age /* 用户年龄 */
        </if>
        
        <if test="birth != null">
            ,#birth /* 生日 */
        </if>
        
        <if test="email != null">
            ,#email /* 邮箱 */
        </if>
        
        <if test="yn != null">
            ,#yn /* 数据状态 0-无效 1-有效 */
        </if>
        
        <if test="createdTime != null">
            ,#createdTime /* 创建时间 */
        </if>
        
        <if test="modifiedTime != null">
            ,#modifiedTime /* 修改时间 */
        </if>
        
        </trim>
    </sql>

    <insert id="insert" parameterType="User"  useGeneratedKeys="true" keyColumn="id" keyProperty="id">
        /* 用户表 */
        INSERT  INTO  user
        (
            <include refid="getInsertField" />
        )
        VALUES (
            <include refid="getInsertFieldValue" />
        )
    </insert>

    <insert id="insertBatch" parameterType="java.util.List">
        INSERT  INTO  user
        <trim prefix="(" suffix=")" prefixOverrides=",">
        
            ,id	/* 自动编号 */
        
            ,username	/* 用户名 */
        
            ,password	/* 密码 */
        
            ,phone	/* 手机号 */
        
            ,address	/* 地址 */
        
            ,sex	/* 用户性别  0-未知   1-男  2-女 */
        
            ,age	/* 用户年龄 */
        
            ,birth	/* 生日 */
        
            ,email	/* 邮箱 */
        
            ,yn	/* 数据状态 0-无效 1-有效 */
        
            ,created_time	/* 创建时间 */
        
            ,modified_time	/* 修改时间 */
        
        </trim>
        VALUES
        <foreach collection="list" item="item" index="index" separator="," >
            <trim prefix="(" suffix=")" prefixOverrides=",">
            
                ,#{item.id}	/* 自动编号 */
            
                ,#{item.username}	/* 用户名 */
            
                ,#{item.password}	/* 密码 */
            
                ,#{item.phone}	/* 手机号 */
            
                ,#{item.address}	/* 地址 */
            
                ,#{item.sex}	/* 用户性别  0-未知   1-男  2-女 */
            
                ,#{item.age}	/* 用户年龄 */
            
                ,#{item.birth}	/* 生日 */
            
                ,#{item.email}	/* 邮箱 */
            
                ,#{item.yn}	/* 数据状态 0-无效 1-有效 */
            
                ,#{item.createdTime}	/* 创建时间 */
            
                ,#{item.modifiedTime}	/* 修改时间 */
            
            </trim>
        </foreach>
    </insert>

    <delete id="deleteById" parameterType="java.lang.Long">
        DELETE FROM user WHERE id = #{id}
    </delete>

    <update id="update" parameterType="User" >
        UPDATE  user
        /* 用户表 */
        <trim prefix="SET" prefixOverrides=",">
        
            <if test="id != null">
                ,id = #{id} /* 自动编号 */
            </if>
        
            <if test="username != null">
                ,username = #{username} /* 用户名 */
            </if>
        
            <if test="password != null">
                ,password = #{password} /* 密码 */
            </if>
        
            <if test="phone != null">
                ,phone = #{phone} /* 手机号 */
            </if>
        
            <if test="address != null">
                ,address = #{address} /* 地址 */
            </if>
        
            <if test="sex != null">
                ,sex = #{sex} /* 用户性别  0-未知   1-男  2-女 */
            </if>
        
            <if test="age != null">
                ,age = #{age} /* 用户年龄 */
            </if>
        
            <if test="birth != null">
                ,birth = #{birth} /* 生日 */
            </if>
        
            <if test="email != null">
                ,email = #{email} /* 邮箱 */
            </if>
        
            <if test="yn != null">
                ,yn = #{yn} /* 数据状态 0-无效 1-有效 */
            </if>
        
        </trim>
        WHERE
        id = #{id}		/* id */
    </update>

    <select id="findById" parameterType="User"  resultMap="baseResultMap">
        SELECT
        <include refid="queryColumns" />
        FROM   user  /* 用户表 */
        WHERE
        id = #{id}		/* id */
    </select>

    <select id="getAllList" parameterType="com.openmall.user.utils.Query"  resultMap="baseResultMap">
        SELECT
        <include refid="queryColumns" />
        FROM    user  /* 用户表 */
        WHERE 1 = 1
        <include refid="wherecontation"/>
        ORDER BY id DESC
    </select>

    <select id="getPagenationList" parameterType="com.openmall.user.utils.PageQueryWrapper" resultMap="baseResultMap">
        SELECT
        <include refid="queryColumns" />
        FROM   user /*  用户表 */
        WHERE 1=1
        <include refid="wherecontation"/>
        ORDER BY id DESC
        LIMIT  #{startRow} ,#{endRow}
    </select>

    <select id="getPagenationListById" parameterType="com.openmall.user.utils.IdPageQuery" resultMap="baseResultMap">
        SELECT
        <include refid="queryColumns" />
        FROM   user /*  用户表 */
        WHERE id > #{minId}
        <include refid="wherecontation"/>
        ORDER BY id ASC
        LIMIT #{pageSize}
    </select>

    <select id="getCount" parameterType="com.openmall.user.utils.PageQuery" resultType="java.lang.Long">
        SELECT COUNT(*)  FROM  user  /*  用户表 */
        WHERE 1 = 1
        <include refid="wherecontation"/>
    </select>

    <select id="getCountBy" parameterType="com.openmall.user.utils.IdPageQuery" resultType="java.lang.Long">
        SELECT count(1)  FROM  user  /*  用户表 */
        WHERE 1 = 1
        <include refid="wherecontation"/>
    </select>

    <select id="getTotalCount" parameterType="com.openmall.user.utils.Query" resultType="java.lang.Long">
        SELECT count(1)  FROM  user /* 用户表 */
        WHERE 1=1
        <include refid="wherecontation"/>
    </select>

</mapper>
